<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JIRA CORS Test</title>
    <style>
        .hidden {
            display: none;
        }
        .primary {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
<div id="loading" class="primary">
    Time Tracker Loading...
</div>

<div id="login" class="hidden primary">
    <p>Enter your JIRA login credentials below:</p>
    <label for="username">Username: <input id="username" value="isimmons"></label><br/>
    <label for="password">Password: <input id="password" type="password"></label><br/>
    <label for="proxy">Proxy: <input id="proxy" value="http://localhost:8080/sharpspring.atlassian.net:443"></label><br/>
    <input type="button" id="saveCredentials" value="Submit">
</div>

<div id="main" class="hidden primary">
    MAIN WINDOW
</div>

<script>
'use strict';
document.getElementById('saveCredentials').onclick = function() {
    request(document.getElementById('proxy').value + '/rest/api/2/myself');
};

function request(url) {
    console.log('Sending request to ' + url);
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function() {
        if (xhr.readyState === XMLHttpRequest.DONE) {
            if (xhr.status !== 200) {
                console.log('There was a problem with the request.');
            }
            console.log(xhr.responseText);
        }
    };
    xhr.open('GET', url);
    xhr.setRequestHeader("Authorization", "Basic " + btoa(document.getElementById('username').value + ":" + document.getElementById('password').value));
    xhr.send();
}
</script>
</body>
</html>